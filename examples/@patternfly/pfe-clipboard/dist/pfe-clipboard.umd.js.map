{"version":3,"file":"pfe-clipboard.umd.js","sources":["../_temp/pfe-clipboard.umd.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeClipboard 1.11.2\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement\";\n\nclass PfeClipboard extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.11.2\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;color:#06c!important;color:var(--pfe-clipboard--Color,var(--pfe-broadcasted--link,#06c))!important;cursor:pointer;padding:6px 16px;padding:var(--pfe-clipboard--Padding,6px 16px);font-weight:300;font-weight:var(--pfe-clipboard--FontWeight,var(--pfe-theme--font-weight--light,300));font-size:1rem;font-size:var(--pfe-clipboard--FontSize,var(--pf-global--FontSize--md,1rem))}:host([hidden]){display:none}.pfe-clipboard__icon{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:1em;width:var(--pfe-clipboard--icon--Width,var(--pfe-theme--icon-size,1em));height:auto;height:var(--pfe-clipboard--icon--Height,auto);margin:0 .4825rem 0 0;margin:var(--pfe-clipboard--icon--Margin,0 .4825rem 0 0);--pfe-icon--Color:var(--pfe-clipboard--icon--Color, var(--pfe-theme--color--text--muted, #6a6e73))}.pfe-clipboard__icon svg{fill:#6a6e73!important;fill:var(--pfe-clipboard--icon--Color,var(--pfe-theme--color--text--muted,#6a6e73))!important}.pfe-clipboard__text{color:#06c!important;color:var(--pfe-clipboard--Color,var(--pfe-broadcasted--link,#06c))!important}.pfe-clipboard__text--success{color:#3e8635!important;color:var(--pfe-clipboard--text--success--Color,var(--pfe-theme--color--feedback--success,#3e8635))!important}.pfe-clipboard[copied] .pfe-clipboard__text,:host([copied]) .pfe-clipboard__text{display:none!important}.pfe-clipboard:not([copied]) .pfe-clipboard__text--success,:host(:not([copied])) .pfe-clipboard__text--success{display:none!important}.pfe-clipboard__icon>*,::slotted([slot=icon]){width:100%}:host(:not([aria-disabled=true]).focus-within),:host(:not([aria-disabled=true]):focus){--pfe-clipboard--Color:var(--pfe-clipboard--Color--focus, var(--pfe-broadcasted--link--focus, #004080))}:host(:not([aria-disabled=true])) ::slotted(:hover),:host(:not([aria-disabled=true]):hover){--pfe-clipboard--Color:var(--pfe-clipboard--Color--hover, var(--pfe-broadcasted--link--hover, #004080))}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){:host{display:inline-block}.pfe-clipboard__icon{display:inline-block;margin-right:0}.pfe-clipboard__text{display:inline-block}.pfe-clipboard__text--success{display:inline-block}} /*# sourceMappingURL=pfe-clipboard.min.css.map */</style>\n<!-- icon slot -->\n${!this.noIcon ? `\n    <div class=\"pfe-clipboard__icon\">\n        <slot name=\"icon\" id=\"icon\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 15.277 16\"><g transform=\"translate(-2.077 -1.807)\"><path class=\"a\" d=\"M15.34,2.879a3.86,3.86,0,0,0-5.339,0L6.347,6.545a3.769,3.769,0,0,0,0,5.339.81.81,0,0,0,1.132,0,.823.823,0,0,0,0-1.145A2.144,2.144,0,0,1,7.5,7.677l3.641-3.654a2.161,2.161,0,1,1,3.049,3.062l-.8.8a.811.811,0,1,0,1.145,1.132l.8-.8a3.769,3.769,0,0,0,0-5.339Z\" transform=\"translate(0.906 0)\"/><path class=\"a\" d=\"M10.482,6.822a.823.823,0,0,0,0,1.145,2.161,2.161,0,0,1,0,3.049L7.343,14.155a2.161,2.161,0,0,1-3.062,0,2.187,2.187,0,0,1,0-3.062l.193-.116a.823.823,0,0,0,0-1.145.811.811,0,0,0-1.132,0l-.193.193a3.86,3.86,0,0,0,0,5.339,3.86,3.86,0,0,0,5.339,0l3.126-3.139A3.731,3.731,0,0,0,12.72,9.562a3.769,3.769,0,0,0-1.094-2.74A.823.823,0,0,0,10.482,6.822Z\" transform=\"translate(0 1.37)\"/></g></svg>\n        </slot>\n    </div>\n` : \"\"}\n<div class=\"pfe-clipboard__text\">\n    <slot name=\"text\" id=\"text\">Copy URL</slot>\n</div>\n<div class=\"pfe-clipboard__text--success\" role=\"alert\">\n    <slot name=\"text--success\" id=\"text--success\">Copied</slot>\n</div>`;\n  }\n\n  static get tag() {\n    return \"pfe-clipboard\";\n  }\n\n  static get meta() {\n    return {\n      title: \"Clipboard\",\n      description: \"Copy current URL to clipboard.\",\n    };\n  }\n\n  get templateUrl() {\n    return \"pfe-clipboard.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-clipboard.scss\";\n  }\n\n  static get events() {\n    return {\n      copied: `${this.tag}:copied`,\n    };\n  }\n\n  // Declare the type of this component\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  static get properties() {\n    return {\n      noIcon: {\n        title: \"No icon\",\n        type: Boolean,\n        observer: \"_noIconChanged\",\n      },\n      copiedDuration: {\n        title: \"Success message duration (in seconds)\",\n        type: Number,\n        default: 3,\n      },\n      role: {\n        type: String,\n        default: \"button\",\n      },\n      tabindex: {\n        type: Number,\n        default: 0,\n      },\n    };\n  }\n\n  static get slots() {\n    return {\n      icon: {\n        title: \"Icon\",\n        description: \"This field can accept an SVG, pfe-icon component, or other format for displaying an icon.\",\n        slotName: \"icon\",\n        slotClass: \"pfe-clipboard__icon\",\n        slotId: \"icon\",\n      },\n      text: {\n        title: \"Default text\",\n        slotName: \"text\",\n        slotClass: \"pfe-clipboard__text\",\n        slotId: \"text\",\n      },\n      textSuccess: {\n        title: \"Success message\",\n        description: \"Shown when the URL is successfully copied to the clipboard.\",\n        slotName: \"text--success\",\n        slotClass: \"pfe-clipboard__text--success\",\n        slotId: \"text--success\",\n      },\n    };\n  }\n\n  constructor() {\n    super(PfeClipboard, { type: PfeClipboard.PfeType });\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Since this element as the role of button we are going to listen\n    // for click and as well as 'enter' and 'space' commands to trigger\n    // the copy functionality\n    this.addEventListener(\"click\", this._clickHandler.bind(this));\n    this.addEventListener(\"keydown\", this._keydownHandler.bind(this));\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", this._clickHandler.bind(this));\n    this.removeEventListener(\"keydown\", this._keydownHandler.bind(this));\n    this.shadowRoot.removeEventListener(\"slotchange\", this._slotchangeHandler.bind(this));\n    super.disconnectedCallback();\n  }\n\n  _noIconChanged(previousValue) {\n    // dirty check to see if we should rerender the template\n    if (this._rendered && this.noIcon !== previousValue) {\n      this.render();\n    }\n  }\n\n  _clickHandler(event) {\n    // Execute the copy to clipboard functionality\n    this.copyURLToClipboard()\n      .then((url) => {\n        // Emit event that lets others know the user has \"copied\"\n        // the url. We are also going to include the url that was\n        // copied.\n        this.emitEvent(PfeClipboard.events.copied, {\n          detail: {\n            url,\n          },\n        });\n        // Toggle the copied state. Use the this._formattedCopiedTimeout function\n        // to an appropraite setTimout length.\n        this.setAttribute(\"copied\", \"\");\n        setTimeout(() => {\n          this.removeAttribute(\"copied\");\n        }, this._formattedCopiedTimeout());\n      })\n      .catch((error) => {\n        this.warn(error);\n      });\n  }\n\n  // Formatted copied timeout value. Use the formattedCopiedTimeout function\n  // to get a type safe, millisecond value of the timeout duration.\n  _formattedCopiedTimeout() {\n    const copiedDuration = Number(this.copiedDuration * 1000);\n    if (!(copiedDuration > -1)) {\n      this.warn(`copied-duration must be a valid number. Defaulting to 3 seconds.`);\n      // default to 3 seconds\n      return 3000;\n    } else {\n      return copiedDuration;\n    }\n  }\n\n  // Listen for keyboard events and map them to their\n  // corresponding mouse events.\n  _keydownHandler(event) {\n    let key = event.key || event.keyCode;\n    switch (key) {\n      case \"Enter\" || 13:\n        this._clickHandler(event);\n        break;\n      case \" \" || 32:\n        // Prevent the browser from scolling when the user hits the space key\n        event.stopPropagation();\n        event.preventDefault();\n        this._clickHandler(event);\n        break;\n    }\n  }\n\n  /**\n   * Copy url to the user's system clipboard\n   *\n   * If available, it will use the new Navigator API to access the system clipboard\n   * https://developer.mozilla.org/en-US/docs/Web/API/Navigator/clipboard\n   *\n   * If unavailable, it will use the legacy execCommand(\"copy\")\n   * https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand\n   * @async\n   * @return {Promise<string>} url\n   */\n  copyURLToClipboard() {\n    return new Promise((resolve, reject) => {\n      const url = window.location.href;\n      // If the Clipboard API is available then use that\n      if (navigator.clipboard) {\n        navigator.clipboard.writeText(url).then(resolve(url));\n      }\n      // If execCommand(\"copy\") exists then use that method\n      else if (document.queryCommandEnabled(\"copy\")) {\n        const dummy = document.createElement(\"input\");\n        document.body.appendChild(dummy);\n        dummy.value = url;\n        dummy.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(dummy);\n        resolve(url);\n      } else {\n        reject(new Error(\"Your browser does not support copying to the clipboard.\"));\n      }\n    });\n  }\n}\n\nPFElement.create(PfeClipboard);\n\nexport default PfeClipboard;\n"],"names":["PfeClipboard","noIcon","title","description","copied","tag","PFElement","PfeTypes","Content","type","Boolean","observer","copiedDuration","Number","default","role","String","tabindex","icon","slotName","slotClass","slotId","text","textSuccess","PfeType","addEventListener","_clickHandler","bind","_keydownHandler","removeEventListener","shadowRoot","_slotchangeHandler","previousValue","_rendered","render","event","copyURLToClipboard","then","url","emitEvent","events","detail","setAttribute","setTimeout","removeAttribute","_formattedCopiedTimeout","catch","error","warn","key","keyCode","stopPropagation","preventDefault","Promise","resolve","reject","window","location","href","navigator","clipboard","writeText","document","queryCommandEnabled","dummy","createElement","body","appendChild","value","select","execCommand","removeChild","Error","create"],"mappings":"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"}